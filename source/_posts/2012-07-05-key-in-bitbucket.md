---
layout: post
title: "bitbucketで公開鍵を管理する"
published: false
date: 2012-07-05 07:34
comments: true
tags: 
categories: 
---

仮想マシンでsshを使う実験を行なってきました。  
今回は、ホストから仮想マシンに公開鍵を渡す手段として、  
外部リポジトリを使う方法を検討します。

## 公開鍵をbitbucketにpushする

ホストの公開鍵を、外部リポジトリにアップロードします。  
秘密鍵を公開しない限り、セキュリティ上の問題はないはずです。  

それでもいちおう、bitbucket上のプライベートリポジトリに
アップロードすることにします。

## bitbucketへのpush

Gitを使って、bitbucketのリポジトリに、
公開鍵をアップロードします。

    cd ~/.ssh
    git init 

引数を忘れると、bitbucketではなくGitHubに、  
リポジトリが作られてしまいますよ。
GitHubには、無料アカウントでは、
プライベートリポジトリがありません。

見えても問題ない情報とはいえ、
大切な貴方のプライバシーの一部です。
セキュリティを向上させるに越したことはありません。

## CommitしてPush

リポジトリが作られたら、公開鍵をコミットします。
次の呪文を唱えて下さい。
否、コマンドを入力してください。

    git commit id_rsa.pub

その後、次の呪文を唱えます。

    git push

これで、貴方の公開鍵は、雲の彼方のbitbucketに
大切にしまわれました。

## サーバーに公開鍵を降臨させる

ファンタジー風の言い回しが気に入ったので、
しばらくこれで行くことにします。

貴方のサーバー上で呪文を唱え、
雲の彼方に隠した鍵を降臨させます。

    git clone ...

取得した鍵を、サーバーのauthorized-keysファイルに
追記します。

あとは、sshデーモンを飼い慣らすことで、
sshアクセスが可能になるでしょう。
sshデーモンとうまくやるには、次の記事を参照してください。
[ssh-daemon]


[ssh-daemon]: http://blog.satrex.jp/
